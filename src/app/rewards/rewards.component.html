<div class="container mt-4 mb-6">
  <div class="row">
    <div class="col-12">
      <h1 class="title-bg-gradient display-2">Stake MPH for xMPH</h1>
      <p class="text-white font-weight-bold mb-5 lead">
        By staking your MPH, you are eligible to collect protocol's revenues and
        voting rights.
        <a
          class="text-purple"
          href="https://docs.88mph.app/mph-staking"
          target="_blank"
        >
          Learn more <i class="fe fe-external-link"></i>
        </a>
      </p>
      <!--desktop user's data-->
      <div class="card-deck d-none d-lg-flex my-5">
        <div class="card mb-5 mb-lg-0">
          <div class="card-body">
            <!-- Title -->
            <h5 class="text-uppercase">xMPH balance</h5>

            <!-- Heading -->
            <h2 class="mb-3 glowing">{{ xMPHBalance.toFormat(4) }} xMPH</h2>
            <!-- Button -->
            <button
              *ngIf="xMPHBalance.gt(0)"
              type="button"
              class="btn btn-sm btn-bg-gradient"
              (click)="openUnstakeModal()"
              [disabled]="!canUnstake() || wallet.watching"
            >
              <i class="fe fe-arrow-down mr-2 align-bottom"></i>Unstake
            </button>
          </div>
        </div>

        <div class="card mb-5 mb-lg-0">
          <div class="card-body">
            <!-- Title -->
            <h5 class="text-uppercase">Value in MPH</h5>
            <span
              class="badge badge-dark border border-light py-0 pl-0 mt-n2 ml-0"
              style="border-radius: 14px"
              placement="right"
              ngbTooltip="1 xMPH = {{ pricePerFullShare.toFormat(4) }} MPH"
            >
              <!-- Heading -->
              <h2 class="mb-0 glowing">
                {{ xMPHBalance.times(pricePerFullShare).toFormat(4) }} MPH
              </h2>
            </span>
            <h5 class="mb-3 text-white">
              ${{ xMPHBalance.times(xMPHPriceUSD).toFormat(4) }}
            </h5>
          </div>
        </div>
        <div class="card mb-4 mb-lg-0">
          <div class="card-body">
            <!-- Title -->
            <h5 class="text-uppercase">Variable APR</h5>
            <!-- Heading -->
            <h2 class="mb-1 glowing">{{ yearlyROI.toFormat(4) }} %</h2>
          </div>
        </div>
      </div>
      <!--mobile user's data-->
      <div class="row d-lg-none my-5">
        <div class="col-6">
          <!-- Title -->
          <h5 class="text-uppercase">xMPH balance</h5>
          <!-- Heading -->
          <h2 class="mb-4 glowing">{{ xMPHBalance.toFormat(4) }} xMPH</h2>
          <!-- Title -->
          <h5 class="text-uppercase">Value in MPH</h5>
          <!-- Heading -->
          <h2 class="mb-0 glowing">
            {{ xMPHBalance.times(pricePerFullShare).toFormat(4) }} MPH
          </h2>
          <h5 class="mb-3 text-white">
            ${{ xMPHBalance.times(xMPHPriceUSD).toFormat(4) }}
          </h5>
        </div>
        <div class="col-6">
          <!-- Title -->
          <h5 class="text-uppercase">Variable APR</h5>
          <!-- Heading -->
          <h2 class="mb-1 glowing">{{ yearlyROI.toFormat(4) }} %</h2>
        </div>
      </div>
      <div class="row">
        <div class="col-12 col-lg-8">
          <div class="card">
            <div class="card-header">
              <h4 class="card-header-title">Stake MPH for xMPH</h4>
            </div>
            <div class="card-body">
              <div class="form-group">
                <label>Amount to stake </label>
                <div class="input-group mb-2">
                  <input
                    type="text"
                    class="form-control form-control-lg"
                    placeholder="0.00"
                    aria-label="stake-amount"
                    [value]="stakeAmount.toString()"
                    (input)="setStakeAmount($event.target.value)"
                  />
                  <div class="input-group-append">
                    <button
                      class="btn btn-lg border-gradient"
                      type="button"
                      (click)="setStakeAmount(unstakedMPHBalance.toFixed(18))"
                    >
                      Max
                    </button>
                  </div>
                </div>
                <small class="form-text text-muted"
                  >{{ unstakedMPHBalance.toFormat(4) }} MPH available</small
                >
              </div>

              <div class="table-responsive p-4">
                <table class="table">
                  <tbody>
                    <tr>
                      <td class="px-0 py-1 text-white border-0 small">
                        Staked balance
                      </td>
                      <td
                        class="px-0 py-1 text-white text-right border-0 small"
                      >
                        <h4 class="mb-0 glowing">
                          {{ xMPHBalance.toFormat(4) }} xMPH
                        </h4>
                      </td>
                    </tr>
                    <tr>
                      <td class="px-0 py-1 text-white border-0 small">
                        Staked balance value
                      </td>
                      <td
                        class="px-0 py-1 text-white text-right border-0 small"
                      >
                        <h4 class="mb-0 glowing">
                          ${{ xMPHBalance.times(xMPHPriceUSD).toFormat(4) }}
                        </h4>
                      </td>
                    </tr>
                    <tr>
                      <td class="px-0 py-1 text-white border-0 small">
                        <strong>Variable APR </strong>
                      </td>
                      <td
                        class="px-0 py-1 text-white text-right border-0 small"
                      >
                        <h4 class="mb-0 glowing">
                          {{ yearlyROI.toFormat(4) }}%
                        </h4>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <button
                type="button"
                class="btn btn-lg btn-block btn-bg-gradient mb-3"
                (click)="stake()"
                [disabled]="!canStake() || wallet.watching"
              >
                <i class="fe fe-arrow-down mr-2 align-bottom"></i>Stake MPH
              </button>
              <div class="row">
                <div class="col-12 mb-3 mb-lg-0">
                  <button
                    type="button"
                    class="btn btn-block btn-lg border-gradient"
                    (click)="openUnstakeModal()"
                    [disabled]="!canUnstake() || wallet.watching"
                  >
                    <i class="fe fe-arrow-up mr-2 align-bottom"></i>Unstake xMPH
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-4">
          <div class="card mb-6">
            <div class="card-header">
              <h4 class="card-header-title">
                Next protocol's revenues to distribute
              </h4>
            </div>
            <div class="card-body">
              <div class="table-responsive p-4">
                <table class="table mb-0">
                  <tbody>
                    <tr>
                      <td class="px-0 py-2 text-white border-0 small">
                        Protocol fees accumulated
                      </td>
                      <td
                        class="px-0 py-2 text-white text-right border-0 small"
                      >
                        <h4 class="mb-0 glowing">
                          ${{ protocolFeesUSD.toFormat(4) }}
                        </h4>
                      </td>
                    </tr>
                    <tr>
                      <td class="px-0 py-2 text-white border-0 small">
                        stkAAVE accumulated
                      </td>
                      <td
                        class="px-0 py-2 text-white text-right border-0 small"
                      >
                        <h4 class="mb-1 glowing">
                          {{ stkaaveRewardsToken.toFormat(4) }} stkAAVE
                        </h4>
                        <h5 class="text-muted">
                          ${{ stkaaveRewardsUSD.toFormat(4) }}
                        </h5>
                      </td>
                    </tr>
                    <tr>
                      <td class="px-0 py-2 text-white border-0 small">
                        COMP accumulated
                      </td>
                      <td
                        class="px-0 py-2 text-white text-right border-0 small"
                      >
                        <h4 class="mb-1 glowing">
                          {{ compRewardsToken.toFormat(4) }} COMP
                        </h4>
                        <h5 class="text-muted">
                          ${{ compRewardsUSD.toFormat(4) }}
                        </h5>
                      </td>
                    </tr>
                    <tr>
                      <td class="px-0 py-2 text-white border-0 small">
                        FARM accumulated
                      </td>
                      <td
                        class="px-0 py-2 text-white text-right border-0 small"
                      >
                        <h4 class="mb-1 glowing">
                          {{ farmRewardsToken.toFormat(4) }} FARM
                        </h4>
                        <h5 class="text-muted">
                          ${{ farmRewardsUSD.toFormat(4) }}
                        </h5>
                      </td>
                    </tr>
                    <tr>
                      <td class="px-0 py-2 text-white border-0 small">Total</td>
                      <td
                        class="px-0 py-2 text-white text-right border-0 small"
                      >
                        <h4 class="mb-1 glowing">
                          ${{ totalRewardsUSD.toFormat(4) }}
                        </h4>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="card-footer">
              <h4 class="mb-0">Distribution on {{ distributionEndTime }}</h4>
            </div>
          </div>
          <div class="card">
            <div class="card-header">
              <h4 class="card-header-title">Things you can do</h4>
            </div>
            <div class="card-body p-0">
              <div class="list-group list-group-flush">
                <a
                  href="/earn"
                  class="list-group-item list-group-item-action px-4"
                >
                  <h4 class="mb-1">
                    Earn up to {{ maxAPY.toFixed(2) }}% fixed APY
                  </h4>
                  <small class="text-muted"
                    >Deposit your crypto or stablecoin to start earning
                    fixed-interest rates. Boost your APY with MPH tokens. Exit
                    anytime.</small
                  >
                  <small class="text-primary ml-2">Learn more</small>
                </a>
                <a
                  href="/earn"
                  class="list-group-item list-group-item-action px-4"
                >
                  <h4 class="mb-1">Buy crypto at a discount</h4>
                  <small class="text-muted"
                    >Buy crypto and stablecoin at a discount by purchasing
                    zero-coupon bonds, and earn high fixed-interest yields by
                    redeeming the zeros one-to-one with their underlying asset
                    when they have reached their maturity. Exit anytime without
                    penalties.</small
                  >
                  <small class="text-primary ml-2">Learn more</small>
                </a>
                <a
                  href="/farm"
                  class="list-group-item list-group-item-action px-4"
                >
                  <h4 class="mb-1">Provide liquidity & boost your yield</h4>
                  <small class="text-muted"
                    >Provide liquidity on our trading pools, and get rewarded by
                    doing so from trading fees and liquidity mining rewards paid
                    in $MPH.</small
                  >
                  <small class="text-primary ml-2">Learn more</small>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
